<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ä¸­å­¦ç”Ÿå‘ã‘ æ•°å­¦ã¾ã¨ã‚ï½œä¸€æ¬¡é–¢æ•°ãƒ»å¹³æ–¹æ ¹</title>
  <meta name="description" content="ä¸­å­¦ç”Ÿå‘ã‘ã®ç„¡æ–™å­¦ç¿’ã¾ã¨ã‚ã‚µã‚¤ãƒˆã€‚å›½èªãƒ»æ•°å­¦ãƒ»è‹±èªãƒ»ç†ç§‘ãƒ»ç¤¾ä¼šã®è§£èª¬ã¨ã‚¯ã‚¤ã‚ºã§æ¥½ã—ãå‹‰å¼·ã§ãã¾ã™ã€‚">
  <link rel="stylesheet" href="style.css">
</head>
<body class="math">

<header>
  <h1>æ•°å­¦ã¾ã¨ã‚</h1>
  <button class="dark-toggle" onclick="toggleDark()">ğŸŒ™</button>
</header>

<main class="content">
<div class="mode-switch">
  <button onclick="showStudy()">ğŸ“– è§£èª¬ãƒ¢ãƒ¼ãƒ‰</button>
  <button onclick="showQuiz()">ğŸ“ ã‚¯ã‚¤ã‚ºãƒ¢ãƒ¼ãƒ‰</button>
</div>

<div class="search-box">
  <input type="text" id="searchInput" placeholder="ğŸ” ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢">
</div>

<section class="box study">
  <h2>ä¸€æ¬¡é–¢æ•°</h2>

  <h3>â‘  ã“ã‚Œã ã‘è¦šãˆã‚Œã°OK</h3>
  <p><strong>y = ax + b</strong></p>

  <h3>â‘¡ è¶…ã‹ã‚“ãŸã‚“èª¬æ˜</h3>
  <ul>
    <li>aï¼šå‚¾ãï¼ˆã©ã‚Œãã‚‰ã„æ–œã‚ã‹ï¼‰</li>
    <li>bï¼šåˆ‡ç‰‡ï¼ˆã‚¹ã‚¿ãƒ¼ãƒˆã®ä½ç½®ï¼‰</li>
  </ul>
  <p>â†’ ã‚°ãƒ©ãƒ•ã®å½¢ã¯ a ã¨ b ã§æ±ºã¾ã‚‹</p>

  <h3>â‘¢ ã‚ˆãã‚ã‚‹ãƒŸã‚¹</h3>
  <ul>
    <li>ï¼‹ ã¨ âˆ’ ã®ç¬¦å·ãƒŸã‚¹</li>
    <li>x ã«æ•°å­—ã‚’ä»£å…¥ã—ãŸå¾Œã®è¨ˆç®—ãƒŸã‚¹</li>
  </ul>

  <h3>â‘£ ã‚³ãƒ„</h3>
  <p>ã¾ãš b ã‚’æ±ºã‚ã¦ã‹ã‚‰ a ã‚’è€ƒãˆã‚‹ã¨ã€ãƒŸã‚¹ãŒæ¸›ã‚‹</p>
</section>

<section class="box study">
  <h2>å¹³æ–¹æ ¹</h2>

  <h3>â‘  ã“ã‚Œã ã‘è¦šãˆã‚Œã°OK</h3>
  <p><strong>âˆša Ã— âˆšb = âˆš(aÃ—b)</strong></p>

  <h3>â‘¡ è¶…ã‹ã‚“ãŸã‚“èª¬æ˜</h3>
  <p>å¹³æ–¹æ ¹ã¯ã€Œ2ä¹—ã—ãŸã‚‰å…ƒã®æ•°ã«ãªã‚‹æ•°ã€</p>
  <p>ä¾‹ï¼šâˆš9 = 3ï¼ˆ3Ã—3 = 9ï¼‰</p>
  <p>ä¾‹ï¼šâˆš8 + âˆš18 = 2âˆš2 + 3âˆš2 = 5âˆš2</p>

  <h3>â‘¢ ã‚ˆãã‚ã‚‹ãƒŸã‚¹</h3>
  <ul>
    <li>âˆš2 + âˆš3 = âˆš5 ã¨ã—ã¦ã—ã¾ã†ï¼ˆâ†ã“ã‚Œã¯é–“é•ã„ï¼‰</li>
  </ul>

  <h3>â‘£ ã‚³ãƒ„</h3>
  <p>è¶³ã—ç®—ãƒ»å¼•ãç®—ã¯ã€âˆšã®ä¸­ã‚’ãã®ã¾ã¾è¨ˆç®—ã—ãªã„ï¼</p>
</section>
<section class="box quiz">
  <h2>ğŸ“ ç¢ºèªã‚¯ã‚¤ã‚º</h2>
  <p id="score"></p>
  <div id="quizArea"></div>
  <button class="reload" onclick="loadQuiz()">ğŸ”„ å•é¡Œã‚’å¤‰ãˆã‚‹</button>
</section>

<a href="index.html" class="back">â† ãƒˆãƒƒãƒ—ã¸æˆ»ã‚‹</a>

</main>
<script>
// ===== æ¤œç´¢æ©Ÿèƒ½ =====
const searchInput = document.getElementById("searchInput");
const boxes = document.querySelectorAll(".study");

searchInput.addEventListener("input", () => {
  const keyword = searchInput.value.toLowerCase();

  boxes.forEach(box => {
    const text = box.innerText.toLowerCase();
    box.style.display = text.includes(keyword) ? "block" : "none";
  });
});

// ===== ã‚¯ã‚¤ã‚ºãƒ‡ãƒ¼ã‚¿ =====
const quizData = [
  { q: "ä¸€æ¬¡é–¢æ•°ã®å¼ã¯ã©ã‚Œï¼Ÿ", choices: ["y = ax + b", "y = axÂ²", "x = ay + b"], answer: 0 },
  { q: "âˆš9 ã®ç­”ãˆã¯ï¼Ÿ", choices: ["2", "3", "9"], answer: 1 },
  { q: "y = 2x + 3 ã®åˆ‡ç‰‡ã¯ï¼Ÿ", choices: ["2", "3", "5"], answer: 1 },
  { q: "âˆš16 ã®ç­”ãˆã¯ï¼Ÿ", choices: ["2", "4", "8"], answer: 1 },
  { q: "ä¸€æ¬¡é–¢æ•°ã§ x ãŒå¢—ãˆã‚‹ã¨ y ã‚‚å¢—ãˆã‚‹æ™‚ã€a ã¯ï¼Ÿ", choices: ["æ­£", "è² ", "0"], answer: 0 },

  { q: "y = -3x + 5 ã®å‚¾ãã¯ï¼Ÿ", choices: ["-3", "5", "3"], answer: 0 },
  { q: "âˆš25 ã¯ã„ãã¤ï¼Ÿ", choices: ["10", "5", "25"], answer: 1 },
  { q: "y = 4x + 1 ã®åˆ‡ç‰‡ã¯ï¼Ÿ", choices: ["4", "1", "0"], answer: 1 },
  { q: "âˆš2 Ã— âˆš8 ã®ç­”ãˆã¯ï¼Ÿ", choices: ["âˆš16", "4", "2âˆš4"], answer: 1 },
  { q: "y = ax + b ã§ b ãŒè¡¨ã™ã‚‚ã®ã¯ï¼Ÿ", choices: ["å‚¾ã", "åˆ‡ç‰‡", "xã®å€¤"], answer: 1 },

  { q: "âˆš36 ã®ç­”ãˆã¯ï¼Ÿ", choices: ["6", "18", "12"], answer: 0 },
  { q: "ä¸€æ¬¡é–¢æ•° y = ax + b ã§ã€x = 0 ã®ã¨ãã® y ã®å€¤ã¯ï¼Ÿ",choices: ["a", "b", "0"], answer: 1 },
  { q: "âˆš5 + âˆš5 ã¯ï¼Ÿ", choices: ["âˆš10", "2âˆš5", "âˆš25"], answer: 1 },
  { q: "y = x + 7 ã®åˆ‡ç‰‡ã¯ï¼Ÿ", choices: ["1", "7", "0"], answer: 1 },
  { q: "âˆš49 ã¯ï¼Ÿ", choices: ["6", "7", "8"], answer: 1 }
];

let correctCount = 0;
let answeredCount = 0;

// ===== ãƒ¢ãƒ¼ãƒ‰åˆ‡æ›¿ =====
function showQuiz() {
  document.querySelectorAll(".study").forEach(el => el.style.display = "none");
  document.querySelector(".quiz").style.display = "block";
  loadQuiz();
}

function showStudy() {
  document.querySelectorAll(".study").forEach(el => el.style.display = "block");
  document.querySelector(".quiz").style.display = "none";
}

// ===== ã‚¯ã‚¤ã‚ºè¡¨ç¤º =====
function loadQuiz() {
  correctCount = 0;
  answeredCount = 0;
  document.getElementById("score").innerText = "";
  const area = document.getElementById("quizArea");
  area.innerHTML = "";

  const shuffled = quizData.sort(() => 0.5 - Math.random());
  const selected = shuffled.slice(0, 5);

  selected.forEach((item, i) => {
    let html = `<div class="q"><p><strong>Q${i+1}.</strong> ${item.q}</p>`;
    item.choices.forEach((c, index) => {
      html += `<button onclick="checkAnswer(this, ${index === item.answer})">${c}</button>`;
    });
    html += `</div>`;
    area.innerHTML += html;
  });
}

// ===== æ­£èª¤åˆ¤å®š =====
function checkAnswer(btn, isCorrect) {
  if (btn.classList.contains("done")) return;

  btn.classList.add("done");
  answeredCount++;

  if (isCorrect) {
    btn.style.background = "#8BC34A";
    btn.innerText = "æ­£è§£ï¼ğŸ‰";
    correctCount++;
  } else {
    btn.style.background = "#F44336";
    btn.innerText = "æ®‹å¿µğŸ’¦";
  }

  if (answeredCount === 5) {
    let rank = "";

    if (correctCount === 5) rank = "S ğŸ‰ å®Œç’§ï¼";
    else if (correctCount === 4) rank = "A ğŸ‘ ã™ã”ã„ï¼";
    else if (correctCount === 3) rank = "B ğŸ™‚ åˆæ ¼ï¼";
    else if (correctCount === 2) rank = "C ğŸ˜… ã‚‚ã†ä¸€æ¯ï¼";
    else rank = "D ğŸ’¦ ãŒã‚“ã°ã‚ã†ï¼";

    document.getElementById("score").innerHTML =
      `ğŸ¯ çµæœï¼š${correctCount} / 5 æ­£è§£ï¼<br>ãƒ©ãƒ³ã‚¯ï¼š${rank}`;
  }
}

// ===== ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰åˆ‡æ›¿ + ä¿å­˜ =====
function toggleDark() {
  document.body.classList.toggle("dark");

  if (document.body.classList.contains("dark")) {
    localStorage.setItem("darkMode", "on");
  } else {
    localStorage.setItem("darkMode", "off");
  }
}

// ===== ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰çŠ¶æ…‹ã‚’å¾©å…ƒ =====
if (localStorage.getItem("darkMode") === "on") {
  document.body.classList.add("dark");
}
</script>


</body>
</html>
