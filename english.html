<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ä¸­å­¦ç”Ÿå‘ã‘ è‹±èªã¾ã¨ã‚ï½œbeå‹•è©ãƒ»ä¸€èˆ¬å‹•è©</title>
  <meta name="description" content="ä¸­å­¦ç”Ÿå‘ã‘ã®ç„¡æ–™å­¦ç¿’ã¾ã¨ã‚ã‚µã‚¤ãƒˆã€‚å›½èªãƒ»æ•°å­¦ãƒ»è‹±èªãƒ»ç†ç§‘ãƒ»ç¤¾ä¼šã®è§£èª¬ã¨ã‚¯ã‚¤ã‚ºã§æ¥½ã—ãå‹‰å¼·ã§ãã¾ã™ã€‚">
  <link rel="stylesheet" href="style.css">
</head>
<body class="english">

<header>
  <h1>è‹±èªã¾ã¨ã‚</h1>
  <button class="dark-toggle" onclick="toggleDark()">ğŸŒ™</button>
</header>

<main class="content">
<div class="mode-switch">
  <button onclick="showStudy()">ğŸ“– è§£èª¬</button>
  <button onclick="showQuiz()">ğŸ“ ã‚¯ã‚¤ã‚º</button>
</div>

<div class="search-box">
  <input type="text" id="searchInput" placeholder="ğŸ” ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢">
</div>

<section class="box study">
  <h2>beå‹•è©</h2>

  <h3>â‘  ã“ã‚Œã ã‘è¦šãˆã‚Œã°OK</h3>
  <p>am / are / is</p>

  <h3>â‘¡ è¶…ã‹ã‚“ãŸã‚“èª¬æ˜</h3>
  <ul>
    <li>I â†’ am</li>
    <li>You / We / They â†’ are</li>
    <li>He / She / It â†’ is</li>
  </ul>

  <h3>â‘¢ ã‚ˆãã‚ã‚‹ãƒŸã‚¹</h3>
  <ul>
    <li>I is ãªã©ã®ä¸»èªãƒŸã‚¹</li>
  </ul>

  <h3>â‘£ ã‚³ãƒ„</h3>
  <ul>
    <li>I am = I'm</li>
    <li>You are = You're</li>
    <li>He is = He's</li>
  </ul>
</section>

<section class="box study">
  <h2>ä¸€èˆ¬å‹•è©</h2>

  <h3>â‘  ã“ã‚Œã ã‘è¦šãˆã‚Œã°OK</h3>
  <p>ä¸»èª + å‹•è©</p>

  <h3>â‘¡ è¶…ã‹ã‚“ãŸã‚“èª¬æ˜</h3>
  <p>å‹•ä½œã‚’è¡¨ã™ï¼ˆplay / like / study ãªã©ï¼‰</p>

  <h3>â‘¢ ã‚ˆãã‚ã‚‹ãƒŸã‚¹</h3>
  <ul>
    <li>ä¸‰å˜ç¾ã® s ã‚’å¿˜ã‚Œã‚‹</li>
  </ul>

  <h3>â‘£ ã‚³ãƒ„</h3>
  <ul>
    <li>He / She / It â†’ å‹•è© + s</li>
    <li>I / You / We / They â†’ ãã®ã¾ã¾</li>
  </ul>
</section>

<section class="box quiz">
  <h2>ğŸ“ ç¢ºèªã‚¯ã‚¤ã‚º</h2>
  <p id="score"></p>
  <div id="quizArea"></div>
  <button class="reload" onclick="loadQuiz()">ğŸ”„ å•é¡Œã‚’å¤‰ãˆã‚‹</button>
</section>

<a href="index.html" class="back">â† ãƒˆãƒƒãƒ—ã¸æˆ»ã‚‹</a>

</main>

<script>
// ===== æ¤œç´¢æ©Ÿèƒ½ =====
const searchInput = document.getElementById("searchInput");
const boxes = document.querySelectorAll(".study");

searchInput.addEventListener("input", () => {
  const keyword = searchInput.value.toLowerCase();

  boxes.forEach(box => {
    const text = box.innerText.toLowerCase();
    box.style.display = text.includes(keyword) ? "block" : "none";
  });
});

// ===== ã‚¯ã‚¤ã‚ºãƒ‡ãƒ¼ã‚¿ =====
const quizData = [
  { q: "ã€Œç§ã¯æ¯æ—¥å­¦æ ¡ã¸è¡Œãã¾ã™ã€", choices: ["I go to school every day.", "I goes to school every day."], answer: 0 },
  { q: "ã€Œå½¼ã¯ã‚µãƒƒã‚«ãƒ¼ãŒå¥½ãã§ã™ã€", choices: ["He like soccer.", "He likes soccer."], answer: 1 },
  { q: "ã€Œå½¼å¥³ã¯å­¦ç”Ÿã§ã™ã€", choices: ["She is a student.", "She are a student."], answer: 0 },
  { q: "ã€Œç§ãŸã¡ã¯éŸ³æ¥½ãŒå¥½ãã§ã™ã€", choices: ["We likes music.", "We like music."], answer: 1 },
  { q: "I â†’ ?", choices: ["are", "am", "is"], answer: 1 },
  { q: "They â†’ ?", choices: ["are", "is", "am"], answer: 0 },
  { q: "He â†’ ?", choices: ["are", "is", "am"], answer: 1 },
  { q: "ä¸‰å˜ç¾ã§æ­£ã—ã„æ–‡ã¯ï¼Ÿ", choices: ["She play tennis.", "She plays tennis."], answer: 1 }
];

let correctCount = 0;
let answeredCount = 0;

// ===== ãƒ¢ãƒ¼ãƒ‰åˆ‡æ›¿ =====
function showQuiz() {
  document.querySelectorAll(".study").forEach(el => el.style.display = "none");
  document.querySelector(".quiz").style.display = "block";
  loadQuiz();
}

function showStudy() {
  document.querySelectorAll(".study").forEach(el => el.style.display = "block");
  document.querySelector(".quiz").style.display = "none";
}

// ===== ã‚¯ã‚¤ã‚ºè¡¨ç¤º =====
function loadQuiz() {
  correctCount = 0;
  answeredCount = 0;
  document.getElementById("score").innerText = "";
  const area = document.getElementById("quizArea");
  area.innerHTML = "";

  const shuffled = quizData.sort(() => 0.5 - Math.random());
  const selected = shuffled.slice(0, 5);

  selected.forEach((item, i) => {
    let html = `<div class="q"><p><strong>Q${i+1}.</strong> ${item.q}</p>`;
    item.choices.forEach((c, index) => {
      html += `<button onclick="checkAnswer(this, ${index === item.answer})">${c}</button>`;
    });
    html += `</div>`;
    area.innerHTML += html;
  });
}

// ===== æ­£èª¤åˆ¤å®š =====
function checkAnswer(btn, isCorrect) {
  if (btn.classList.contains("done")) return;

  btn.classList.add("done");
  answeredCount++;

  if (isCorrect) {
    btn.style.background = "#8BC34A";
    btn.innerText = "æ­£è§£ï¼ğŸ‰";
    correctCount++;
  } else {
    btn.style.background = "#F44336";
    btn.innerText = "æ®‹å¿µğŸ’¦";
  }

  if (answeredCount === 5) {
    let rank = "";

    if (correctCount === 5) rank = "S ğŸ‰ å®Œç’§ï¼";
    else if (correctCount === 4) rank = "A ğŸ‘ ã™ã”ã„ï¼";
    else if (correctCount === 3) rank = "B ğŸ™‚ åˆæ ¼ï¼";
    else if (correctCount === 2) rank = "C ğŸ˜… ã‚‚ã†ä¸€æ¯ï¼";
    else rank = "D ğŸ’¦ ãŒã‚“ã°ã‚ã†ï¼";

    document.getElementById("score").innerHTML =
      `ğŸ¯ çµæœï¼š${correctCount} / 5 æ­£è§£ï¼<br>ãƒ©ãƒ³ã‚¯ï¼š${rank}`;
  }
}

// ===== ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰åˆ‡æ›¿ + ä¿å­˜ =====
function toggleDark() {
  document.body.classList.toggle("dark");

  if (document.body.classList.contains("dark")) {
    localStorage.setItem("darkMode", "on");
  } else {
    localStorage.setItem("darkMode", "off");
  }
}

// ===== ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰çŠ¶æ…‹ã‚’å¾©å…ƒ =====
if (localStorage.getItem("darkMode") === "on") {
  document.body.classList.add("dark");
}
</script>

</body>
</html>

