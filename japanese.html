<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>中学生向け 国語まとめ｜文法・品詞・クイズ</title>
  <meta name="description" content="中学生向けの無料学習まとめサイト。国語・数学・英語・理科・社会の解説とクイズで楽しく勉強できます。">
  <link rel="stylesheet" href="style.css">
</head>
<body class="kokugo">

<header>
  <h1>国語まとめ</h1>
  <button class="dark-toggle" onclick="toggleDark()">🌙</button>
</header>

<main class="content">
<div class="mode-switch">
  <button onclick="showStudy()">📖 解説</button>
  <button onclick="showQuiz()">📝 クイズ</button>
</div>

<div class="search-box">
  <input type="text" id="searchInput" placeholder="🔍 キーワード検索">
</div>

<section class="box study">
  <h2>品詞</h2>

  <h3>① これだけ覚えればOK</h3>
  <p>名詞・動詞・形容詞・形容動詞・副詞・助詞・助動詞・接続詞・感動詞</p>

  <h3>② 超かんたん説明</h3>
  <p>言葉の「役割」によって分けたもの</p>

  <h3>③ よくあるミス</h3>
  <ul>
    <li>形容詞と形容動詞の区別</li>
  </ul>

  <h3>④ コツ</h3>
  <ul>
    <li>「〜い」で終わる → 形容詞</li>
    <li>「〜だ・〜な」で終わる → 形容動詞</li>
    <li>「〜う・〜く・〜す・〜つ・〜ぶ・〜む・〜る」で終わる → 動詞</li>
    <li>「〜が・〜を・〜は」が付けられる → 名詞</li>
    <li>動き・様子・程度を表す → 副詞（とても・ゆっくり など）</li>
    <li>名詞の後ろにつく → 助詞（は・が・を・に・で・と など）</li>
    <li>文と文をつなぐ → 接続詞（そして・しかし・だから）</li>
    <li>気持ち・呼びかけ → 感動詞（あっ・えー・はい）</li>
  </ul>
</section>

<section class="box study">
  <h2>主語と述語</h2>

  <h3>① これだけ覚えればOK</h3>
  <p>主語：〜は / が　述語：どうする・どんなだ</p>

  <h3>② 超かんたん説明</h3>
  <p>「誰が・何が」＋「どうした」</p>

  <h3>③ よくあるミス</h3>
  <ul>
    <li>修飾語と混ざる</li>
  </ul>

  <h3>④ コツ</h3>
  <p>文を短くして「誰が」「どうした」に分ける</p>
</section>

<section class="box quiz">
  <h2>📝 確認クイズ</h2>
  <p id="score"></p>
  <div id="quizArea"></div>
  <button class="reload" onclick="loadQuiz()">🔄 問題を変える</button>
</section>

<a href="index.html" class="back">← トップへ戻る</a>

</main>

<script>
// ===== 検索機能 =====
const searchInput = document.getElementById("searchInput");
const boxes = document.querySelectorAll(".study");

searchInput.addEventListener("input", () => {
  const keyword = searchInput.value.toLowerCase();

  boxes.forEach(box => {
    const text = box.innerText.toLowerCase();
    box.style.display = text.includes(keyword) ? "block" : "none";
  });
});

// ===== クイズデータ =====
const quizData = [
  { q: "主語はどれ？", choices: ["食べる", "私が", "りんごを"], answer: 1 },
  { q: "述語はどれ？", choices: ["犬が", "走る", "公園で"], answer: 1 },
  { q: "『美しい』は何詞？", choices: ["名詞", "形容詞", "副詞"], answer: 1 },
  { q: "『静かだ』は何詞？", choices: ["形容動詞", "形容詞", "名詞"], answer: 0 },
  { q: "『そして』は何詞？", choices: ["接続詞", "助詞", "副詞"], answer: 0 },
  { q: "『とても』は何詞？", choices: ["名詞", "副詞", "助動詞"], answer: 1 },
  { q: "『〜を』は何詞？", choices: ["助詞", "名詞", "動詞"], answer: 0 },
  { q: "文の中で動作を表すのは？", choices: ["名詞", "動詞", "形容詞"], answer: 1 }
];

let correctCount = 0;
let answeredCount = 0;

// ===== モード切替 =====
function showQuiz() {
  document.querySelectorAll(".study").forEach(el => el.style.display = "none");
  document.querySelector(".quiz").style.display = "block";
  loadQuiz();
}

function showStudy() {
  document.querySelectorAll(".study").forEach(el => el.style.display = "block");
  document.querySelector(".quiz").style.display = "none";
}

// ===== クイズ表示 =====
function loadQuiz() {
  correctCount = 0;
  answeredCount = 0;
  document.getElementById("score").innerText = "";
  const area = document.getElementById("quizArea");
  area.innerHTML = "";

  const shuffled = quizData.sort(() => 0.5 - Math.random());
  const selected = shuffled.slice(0, 5);

  selected.forEach((item, i) => {
    let html = `<div class=\"q\"><p><strong>Q${i+1}.</strong> ${item.q}</p>`;
    item.choices.forEach((c, index) => {
      html += `<button onclick=\"checkAnswer(this, ${index === item.answer})\">${c}</button>`;
    });
    html += `</div>`;
    area.innerHTML += html;
  });
}

// ===== 正誤判定 =====
function checkAnswer(btn, isCorrect) {
  if (btn.classList.contains("done")) return;

  btn.classList.add("done");
  answeredCount++;

  if (isCorrect) {
    btn.style.background = "#8BC34A";
    btn.innerText = "正解！🎉";
    correctCount++;
  } else {
    btn.style.background = "#F44336";
    btn.innerText = "残念💦";
  }

  if (answeredCount === 5) {
    let rank = "";

    if (correctCount === 5) rank = "S 🎉 完璧！";
    else if (correctCount === 4) rank = "A 👍 すごい！";
    else if (correctCount === 3) rank = "B 🙂 合格！";
    else if (correctCount === 2) rank = "C 😅 もう一息！";
    else rank = "D 💦 がんばろう！";

    document.getElementById("score").innerHTML =
      `🎯 結果：${correctCount} / 5 正解！<br>ランク：${rank}`;
  }
}

// ===== ダークモード切替 + 保存 =====
function toggleDark() {
  document.body.classList.toggle("dark");

  if (document.body.classList.contains("dark")) {
    localStorage.setItem("darkMode", "on");
  } else {
    localStorage.setItem("darkMode", "off");
  }
}

// ===== ダークモード状態を復元 =====
if (localStorage.getItem("darkMode") === "on") {
  document.body.classList.add("dark");
}
</script>

</body>
</html>
